currentBuild.displayName = "DockerBuildPush-#"+currentBuild.number

pipeline
{
    agent{
        label "jenkins-ssh-agent-docker"
    }
    stages{
        stage("Welcome")
        {
            steps{
            sh 'echo "Welcome" '
            }
        }

        stage("Docker Build")
        {
            steps{
                sh 'sudo docker build -t suraj01dev/hello:latest .'
    
            }
        }
        stage("Docker Push")
        {
            steps{
                withCredentials([string(credentialsId: 'dockerpwd', variable: 'dockerhubpwd')]) {

                sh 'sudo docker login -u suraj01dev -p ${dockerhubpwd}'
                sh 'sudo docker push suraj01dev/hello:latest'

                }
            }
        }
    }
}



